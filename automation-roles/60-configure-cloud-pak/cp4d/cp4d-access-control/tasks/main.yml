---
- name: Show Cloud Pak for Data Access control
  debug:
    var: _cp4d_access_control

- include_tasks: cp4d-keycloak-client.yml
  when: (_cp4d_access_control.keycloak_name | default('')) != ''

- include_tasks: cp4d-demo-openldap-client.yml
  when: (_cp4d_access_control.demo_openldap_name | default('')) != ''

- name: Configure Cloud Pak for Data user group
  include_tasks: cp4d-user-group.yml
  loop: "{{ _cp4d_access_control.user_groups | default([]) }}"
  loop_control:
    loop_var: _cp4d_user_group
---
- name: Get OpenShift DataScienceCluster
  kubernetes.core.k8s_info:
    api_version: datasciencecluster.opendatahub.io/v1
    kind: DataScienceCluster
    name: default-dsc
  register: _dsc

# OpenShift AI add-on requires Serverless and Service Mesh operators to be installed first. Even then,
# the installation doesn't always complete successfully. Decision is to let users install OpenShift AI themselves
# from the IBM Cloud ROKS console

# - include_tasks: openshift-ai-roks-addon.yml
#   when:
#   - _dsc.resources[0] | default({}) == {}
#   - cloud_platform == 'ibm-cloud'

- fail:
    msg: OpenShift AI is yet not installed on the ROKS cluster; you must enable the Red Hat OpenShift AI add-on for the cluster
  when: _dsc.resources[0] | default({}) == {}
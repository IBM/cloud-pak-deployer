apiVersion: v1
kind: ServiceAccount
metadata:
  name: demo-ui-admin
---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: demo-ui-admin-crb
subjects:
  - kind: ServiceAccount
    name: demo-ui-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
---
apiVersion: batch/v1
kind: Job
metadata:
  name: demo-ui-create-config
spec:
  template:
    spec:
      containers:
        - name: config
          image: quay.io/openshift/origin-cli:latest
          imagePullPolicy: IfNotPresent
          resources:
            requests:
              memory: "64Mi"
              cpu: "150m"
            limits:
              memory: "256Mi"
              cpu: "200m"
          command:
            - /bin/sh
            - -c
            - |
              set -x

              export WAIOPS_NAMESPACE={{current_cp4waiops_cluster.project}}
              export KAFKA_TOPIC_EVENTS=$(oc get kafkatopics -n $WAIOPS_NAMESPACE | grep -v cp4waiopscp4waiops|grep -v noi-integration | grep cp4waiops-cartridge-alerts-$EVENTS_TYPE| awk '{print $1;}')
              export KAFKA_TOPIC_LOGS=$(oc get kafkatopics -n $WAIOPS_NAMESPACE  | grep -v cp4waiopscp4waiops| grep cp4waiops-cartridge-logs-humio| awk '{print $1;}')
              export KAFKA_SECRET=$(oc get secret -n {{current_cp4waiops_cluster.project}} |grep 'aiops-kafka-secret'|awk '{print$1}')
              export KAFKA_USER=$(oc get secret $KAFKA_SECRET -n $WAIOPS_NAMESPACE -o jsonpath='{.data.username}' | base64 --decode)
              export KAFKA_PWD=$(oc get secret $KAFKA_SECRET -n $WAIOPS_NAMESPACE -o jsonpath='{.data.password}' | base64 --decode)
              export KAFKA_BROKER=$(oc get routes iaf-system-kafka-0 -n $WAIOPS_NAMESPACE -o=jsonpath='{.status.ingress[0].host}{"\n"}'):443
              export CERT_ELEMENT=$(oc get secret -n $WAIOPS_NAMESPACE kafka-secrets  -o=jsonpath='{.data.ca\.crt}'| base64 -d| tr -d '\r\n')
              export LOG_ITERATIONS=5
              export TOKEN="test"

              echo "KAFKA_BROKER: '"$KAFKA_BROKER"'"
              echo "KAFKA_USER: '"$KAFKA_USER"'"
              echo "KAFKA_PWD: '"$KAFKA_PWD"'"
              echo "KAFKA_TOPIC_EVENTS: '"$KAFKA_TOPIC_EVENTS"'"
              echo "KAFKA_TOPIC_LOGS: '"$KAFKA_TOPIC_EVENTS"'"
              echo "CERT_ELEMENT:  |- "
              echo $CERT_ELEMENT
              echo "LOG_ITERATIONS: '"$LOG_ITERATIONS"'"
              echo "TOKEN: '"$TOKEN"'"


              cat <<EOF | oc apply -n {{current_cp4waiops_cluster.project}} -f -
                apiVersion: v1
                kind: ConfigMap
                metadata:
                  name:  demo-ui-config
                  namespace: {{current_cp4waiops_cluster.project}}
                data:
                  LOG_ITERATIONS: '10'
                  TOKEN: $TOKEN
                  KAFKA_BROKER: $KAFKA_BROKER
                  KAFKA_USER: $KAFKA_USER
                  KAFKA_PWD: $KAFKA_PWD
                  KAFKA_TOPIC_EVENTS: $KAFKA_TOPIC_EVENTS
                  KAFKA_TOPIC_LOGS: $KAFKA_TOPIC_LOGS
                  CERT_ELEMENT:  |-
                    $CERT_ELEMENT
                  DEMO_EVENTS:  |-
                    {"events": [{"Node" : "mysql-github","NodeAlias" : "github","Manager" : "Github","AlertGroup" : "robot-shop","Severity" : 2,"Summary" : "[Git] Commit in repository robot-shop by Niklaus Hirt on file robot-shop.yaml - New Memory Limits","URL": "https://pirsoscom.github.io/git-commit-robot.html"},{"Node" : "mysql-instana","NodeAlias" : "mysql","Manager" : "Instana","AlertGroup" : "robot-shop","Severity" : 3,"Summary" : "[Instana] MySQL - change detected - The value **resources/limits** has changed","URL": "https://pirsoscom.github.io/INSTANA_CHANGE_ROB.html"},{"Node" : "mysql-security","NodeAlias" : "mysql","Manager" : "Security","AlertGroup" : "robot-shop","Severity" : 2,"Summary" : "[Security] MySQL K8s Pod Created","URL": "none"},{"Node" : "mysql-predictive","NodeAlias" : "web","Manager" : "Metric Anomaly","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Predictive] MySQL memory peak usage anomaly","URL": "https://pirsoscom.github.io/METRICS_ROBOT_MEM_DETAIL.html"},{"Node" : "mysql-turbonomic","NodeAlias" : "mysql","Manager" : "Turbonomic","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Turbonomic] Container Resize - Controller Resize - Resize UP VMem Limit from 50 MB to 328 MB in Container Spec mysql","URL": "https://pirsoscom.github.io/TURBO_MYSQL_ACTIONS.html"},{"Node" : "mysql-turbonomic","NodeAlias" : "mysql","Manager" : "Turbonomic","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Turbonomic] Container Resize - Controller Resize - Resize UP VMem Limit from 50 MB to 328 MB in Container Spec mysql","URL": "https://pirsoscom.github.io/TURBO_MYSQL_ACTIONS.html"},{"Node" : "mysql-turbonomic","NodeAlias" : "mysql","Manager" : "Turbonomic","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Turbonomic] Container Resize - Controller Resize - Resize UP VMem Limit from 50 MB to 328 MB in Container Spec mysql","URL": "https://pirsoscom.github.io/TURBO_MYSQL_ACTIONS.html"},{"Node" : "mysql-turbonomic","NodeAlias" : "mysql","Manager" : "Turbonomic","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Turbonomic] Container Resize - Controller Resize - Resize UP VMem Limit from 50 MB to 328 MB in Container Spec mysql","URL": "https://pirsoscom.github.io/TURBO_MYSQL_ACTIONS.html"},{"Node" : "mysql-turbonomic","NodeAlias" : "mysql","Manager" : "Turbonomic","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Turbonomic] Container Resize - Controller Resize - Resize UP VMem Limit from 50 MB to 328 MB in Container Spec mysql","URL": "https://pirsoscom.github.io/TURBO_MYSQL_ACTIONS.html"},{"Node" : "web-synthetic","NodeAlias" : "web","Manager" : "Selenium","AlertGroup" : "robot-shop","Severity" : 3,"Summary" : "[Synthetic] Robotshop Homepage - Functional verification failed","URL": "https://pirsoscom.github.io/SYNTH_ROB_SELENIUM_STAG_DETAIL.html"},{"Node" : "ratings-log","NodeAlias" : "ratings","Manager" : "Humio","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Log] Ratings - Alert Description: resource.name=ratings(Error: unable to contact MYSQL failed with status code 500)","URL": "https://pirsoscom.github.io/HUM_reviews_error.html"},{"Node" : "ratings-predictive","NodeAlias" : "ratings","Manager" : "Metric Anomaly","AlertGroup" : "robot-shop","Severity" : 4,"Summary" : "[Predictive] Ratings - Transactions anomaly","URL": "https://pirsoscom.github.io/METRICS_ROBOT_MEM_TRANS.html"},{"Node" : "catalogue-log","NodeAlias" : "catalogue","Manager" : "Humio","AlertGroup" : "robot-shop","Severity" : 3,"Summary" : "[Log] Catalogue - Alert Description: resource.name=catalogue (Error: unable to contact http://ratings:9080/ratings got status of 503)","URL": "https://pirsoscom.github.io/HUM_reviews_error.html"},{"Node" : "mysql-instana","NodeAlias" : "mysql","Manager" : "Instana","AlertGroup" : "robot-shop","Severity" : 5,"Summary" : "[Instana] MySQL - available replicas is less than desired replicas - Check conditions and error events","URL": "https://pirsoscom.github.io/Instana_Event_ROB_Available-replicas.html"},{"Node" : "web-instana","NodeAlias" : "web","Manager" : "Instana","AlertGroup" : "robot-shop","Severity" : 5,"Summary" : "[Instana] Robotshop Homepage call rate is too high- Robotshop call rate stays at a high level for an extended period of time","URL": "https://pirsoscom.github.io/INSTANA_SUMMARY_NOK_ROB.html"}],"numberOfEvents": 1}
                  DEMO_LOGS:  |-
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.929990544-05:00 stdout F {\"level\":\"info\",\"time\":1621250410929,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35942,\"method\":\"GET\",\"url\":\"/products\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"46.114.35.116\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45316},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"2196\",\"etag\":\"W/\\"894-hc3tywPhnCGLKFvHN2ZOd0EEe98\\"\"}},\"responseTime\":1,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1240_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.927768253-05:00 stdout F {\"level\":\"info\",\"time\":1621250410927,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35941,\"method\":\"GET\",\"url\":\"/product/HPTD\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"98.142.103.241\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45314},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"263\",\"etag\":\"W/\\"107-mEwFbjcUBWVgDSih58gLEo30MeU\\"\"}},\"responseTime\":3,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1239_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.927563434-05:00 stdout F {\"level\":\"info\",\"time\":1621250410927,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35941,\"method\":\"GET\",\"url\":\"/product/HPTD\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"98.142.103.241\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45314},\"msg\":\"product {\\"_id\\":\\"60a2060488dd4621c4f12e1c\\",\\"sku\\":\\"HPTD\\",\\"name\\":\\"High-Powered Travel Droid\\",\\"description\\":\\"Traveling to the far reaches of the Galaxy? You need this for protection. Comes in handy when you are lost in space\\",\\"price\\":1200,\\"instock\\":12,\\"categories\\":[\\"Robot\\"]}\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1238_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.922365132-05:00 stdout F {\"level\":\"info\",\"time\":1621250410922,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35939,\"method\":\"GET\",\"url\":\"/product/HPTD\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"156.33.241.5\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45310},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"263\",\"etag\":\"W/\\"107-mEwFbjcUBWVgDSih58gLEo30MeU\\"\"}},\"responseTime\":4,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1237_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.922061234-05:00 stdout F {\"level\":\"info\",\"time\":1621250410921,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35939,\"method\":\"GET\",\"url\":\"/product/HPTD\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"156.33.241.5\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45310},\"msg\":\"product {\\"_id\\":\\"60a2060488dd4621c4f12e1c\\",\\"sku\\":\\"HPTD\\",\\"name\\":\\"High-Powered Travel Droid\\",\\"description\\":\\"Traveling to the far reaches of the Galaxy? You need this for protection. Comes in handy when you are lost in space\\",\\"price\\":1200,\\"instock\\":12,\\"categories\\":[\\"Robot\\"]}\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1236_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.920550071-05:00 stdout F {\"level\":\"info\",\"time\":1621250410920,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35940,\"method\":\"GET\",\"url\":\"/categories\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"46.114.35.116\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45312},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"35\",\"etag\":\"W/\\"23-3HBE6f93d4sFlL5ihgJNikc4K/k\\"\"}},\"responseTime\":2,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1235_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.918169609-05:00 stdout F {\"level\":\"info\",\"time\":1621250410918,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35938,\"method\":\"GET\",\"url\":\"/products\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"98.142.103.241\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45308},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"2196\",\"etag\":\"W/\\"894-hc3tywPhnCGLKFvHN2ZOd0EEe98\\"\"}},\"responseTime\":3,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1234_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.827855920-05:00 stdout F {\"level\":\"info\",\"time\":1621250410827,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35937,\"method\":\"GET\",\"url\":\"/products\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"156.33.241.5\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45298},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"2196\",\"etag\":\"W/\\"894-hc3tywPhnCGLKFvHN2ZOd0EEe98\\"\"}},\"responseTime\":2,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1233_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.825809223-05:00 stdout F {\"level\":\"info\",\"time\":1621250410825,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35936,\"method\":\"GET\",\"url\":\"/categories\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"98.142.103.241\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45294},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"35\",\"etag\":\"W/\\"23-3HBE6f93d4sFlL5ihgJNikc4K/k\\"\"}},\"responseTime\":1,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1232_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.73","kubernetes.container_hash":"docker.io/robotshop/rs-catalogue@sha256:f333c26d08cd4f8d649cd0a891d5f80cc9c26a846d745dcac27d5c5210bdbc89","kubernetes.docker_id":"39d83307cb171da5e7ef5d05e9e40da2feebee6356e3d745f0c99bb353f8dc85","kubernetes.container_name":"catalogue","kubernetes.labels.pod-template-hash":"5dd69f5985","kubernetes.container_image":"docker.io/robotshop/rs-catalogue:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.134.223/32","kubernetes.labels.service":"catalogue","@rawstring":"2021-05-17T06:20:10.737916556-05:00 stdout F {\"level\":\"info\",\"time\":1621250410737,\"pid\":1,\"hostname\":\"catalogue-5dd69f5985-p2s2c\",\"req\":{\"id\":35935,\"method\":\"GET\",\"url\":\"/categories\",\"headers\":{\"host\":\"catalogue:8080\",\"connection\":\"close\",\"user-agent\":\"python-requests/2.25.1\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"x-forwarded-for\":\"156.33.241.5\"},\"remoteAddress\":\"::ffff:172.30.99.11\",\"remotePort\":45288},\"res\":{\"statusCode\":200,\"headers\":{\"x-powered-by\":\"Express\",\"timing-allow-origin\":\"*\",\"access-control-allow-origin\":\"*\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"35\",\"etag\":\"W/\\"23-3HBE6f93d4sFlL5ihgJNikc4K/k\\"\"}},\"responseTime\":1,\"msg\":\"request completed\",\"v\":1}","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1231_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.134.223\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.134.223/32","#repo":"aiops","kubernetes.pod_name":"catalogue-5dd69f5985-p2s2c","kubernetes.pod_id":"6e1c41a3-9f29-4422-a1a6-73ff6315dedb"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:10.981158469-05:00 stdout F 172.30.99.11 - - [17/May/2021:11:20:10 +0000] \"GET /api/fetch/HPTD HTTP/1.1\" 200 345 \"-\" \"python-requests/2.25.1\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1217_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:10.977832817-05:00 stdout F 172.30.99.11 - - [17/May/2021:11:20:10 +0000] \"GET /api/fetch/HPTD HTTP/1.1\" 200 345 \"-\" \"python-requests/2.25.1\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1216_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:10.942312117-05:00 stdout F [2021-05-17 11:20:10] app.INFO: Annotated DataCenter asia-northeast2 [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1215_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:10.936426124-05:00 stdout F [2021-05-17 11:20:10] app.INFO: Annotated DataCenter asia-northeast2 [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_1214_1621250410","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:09.831239074-05:00 stdout F 10.113.56.112 - - [17/May/2021:11:20:09 +0000] \"GET /_health HTTP/1.1\" 200 332 \"-\" \"kube-probe/1.19\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_33_1621250409","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:09.830229714-05:00 stdout F [2021-05-17 11:20:09] app.INFO: Health-Check {\"pdo_connectivity\":true} []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_32_1621250409","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:09.823052134-05:00 stdout F [2021-05-17 11:20:09] app.INFO: Annotated DataCenter asia-south1 [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1515_31_1621250409","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:22.935289116-05:00 stdout F [2021-05-17 11:20:22] app.INFO: Annotated DataCenter us-east1 [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_1219_1621250422","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:22.933376226-05:00 stdout F [2021-05-17 11:20:22] php.CRITICAL: Uncaught Error: Return value of Instana\RobotShop\Ratings\Database::getConnection() must be an instance of PDO, null returned {\"exception\":\"[object] (TypeError(code: 0): Return value of Instana\\RobotShop\\Ratings\\Database::getConnection() must be an instance of PDO, null returned at /var/www/html/src/Database.php:52)\"} []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_1218_1621250422","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:22.932531001-05:00 stdout F [2021-05-17 11:20:22] app.ERROR: Database error SQLSTATE[HY000] [2002] Connection refused [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_1217_1621250422","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.126","kubernetes.container_hash":"docker.io/robotshop/rs-web@sha256:d9d9db15c249718e2585e00cb7646fafeac3745473821c827836c6051db33e91","kubernetes.docker_id":"0cda5aac1cb2154ebadc0b8be7561b77eae6abf4f2a3406624b58ff6c46cebd2","kubernetes.container_name":"web","kubernetes.labels.pod-template-hash":"5488d5545f","kubernetes.container_image":"docker.io/robotshop/rs-web:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.99.11\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.99.11/32","kubernetes.labels.service":"web","@rawstring":"2021-05-17T06:20:21.817911386-05:00 stdout F 172.30.99.15 - - [17/May/2021:11:20:21 +0000] \"GET //api/ratings/api/fetch/RMC HTTP/1.1\" 500 149759 \"-\" \"python-requests/2.25.1\" \"34.196.93.245\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_36_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.99.11\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.99.11/32","#repo":"aiops","kubernetes.pod_name":"web-5488d5545f-5g262","kubernetes.pod_id":"5e27fd79-59a5-4519-80fd-12e5fb03e945"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:21.814191006-05:00 stdout F 172.30.99.11 - - [17/May/2021:11:20:18 +0000] \"GET /api/fetch/RMC HTTP/1.1\" 500 150195 \"-\" \"python-requests/2.25.1\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_35_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:21.729724837-05:00 stdout F [2021-05-17 11:20:21] app.INFO: Annotated DataCenter europe-west3 [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_34_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:21.729724837-05:00 stdout F [2021-05-17 11:20:21] php.CRITICAL: Uncaught Error: Return value of Instana\RobotShop\Ratings\Database::getConnection() must be an instance of PDO, null returned {\"exception\":\"[object] (TypeError(code: 0): Return value of Instana\\RobotShop\\Ratings\\Database::getConnection() must be an instance of PDO, null returned at /var/www/html/src/Database.php:52)\"} []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_33_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:21.729724837-05:00 stdout F [2021-05-17 11:20:21] app.ERROR: Database error SQLSTATE[HY000] [2002] Connection refused [] []","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_32_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}
                    {"kubernetes.namespace_name":"robot-shop","@timestamp":MY_TIMESTAMP000,"kubernetes.host":"10.113.56.112","kubernetes.container_hash":"docker.io/robotshop/rs-ratings@sha256:fbca0b66691139e7e535ac3bc2a8f72917b5c1d09ee74c22d4b0858477c4f345","kubernetes.docker_id":"3fa6191bda96e269b57b4afe5f01c920df2d041607bf5f6e94b0d83f66f63fc3","kubernetes.container_name":"ratings","kubernetes.labels.pod-template-hash":"598b5f8c5f","kubernetes.container_image":"docker.io/robotshop/rs-ratings:latest","kubernetes.annotations.k8s_v1_cni_cncf_io/networks-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","@timezone":"Z","kubernetes.annotations.cni_projectcalico_org/podIPs":"172.30.217.214/32","kubernetes.labels.service":"ratings","@rawstring":"2021-05-17T06:20:21.015096480-05:00 stdout F 10.113.56.112 - - [17/May/2021:11:20:19 +0000] \"GET /_health HTTP/1.1\" 500 148834 \"-\" \"kube-probe/1.19\"","@id":"GyMXpNTBtK5z7bQJajuCvuxC_1523_31_1621250421","kubernetes.annotations.openshift_io/scc":"anyuid","#type":"unparsed","kubernetes.annotations.k8s_v1_cni_cncf_io/network-status":"[{ \"name\": \"\", \"ips\": [ \"172.30.217.214\" ], \"default\": true, \"dns\": {}}]","kubernetes.annotations.cni_projectcalico_org/podIP":"172.30.217.214/32","#repo":"aiops","kubernetes.pod_name":"ratings-598b5f8c5f-xcskq","kubernetes.pod_id":"abae5566-6e04-4191-a866-30d6bf4a294b"}

              EOF

      restartPolicy: Never
      serviceAccountName: demo-ui-admin
  backoffLimit: 4
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ibm-aiops-demo-ui
  labels:
      app:  ibm-aiops-demo-ui
spec:
  replicas: 1
  selector:
    matchLabels:
      app:  ibm-aiops-demo-ui
  template:
    metadata:
      labels:
        app:  ibm-aiops-demo-ui
    spec:
      containers:
      - image: niklaushirt/cp4waiops-demo-ui:3.1
        imagePullPolicy: Always
        name: gateway
        command:
        ports:
        - containerPort: 8080
        resources:
          requests:
            cpu: "50m"
            memory: "50Mi"
          limits:
            cpu: "550m"
            memory: "550Mi"
        envFrom:
        - configMapRef:
            name:  demo-ui-config
---
apiVersion: v1
kind: Service
metadata:
  name:  ibm-aiops-demo-ui-service
spec:
  selector:
    app:  ibm-aiops-demo-ui
  ports:
    - protocol: TCP
      port: 8080
      targetPort: 8080
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name:  cp4waiops-demo-ui
spec:
  to:
    kind: Service
    name:  ibm-aiops-demo-ui-service


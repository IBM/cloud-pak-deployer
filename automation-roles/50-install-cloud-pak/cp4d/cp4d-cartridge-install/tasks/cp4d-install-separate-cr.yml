---
- ansible.builtin.stat:
    path: "{{ role_path }}/tasks/cp4d-install-cr-{{ _current_cp4d_cartridge.olm_utils_name }}.yml"
  register: _install_cr_script

# Run generic separate install script if specific script does not exist for cartridge
- include_tasks: cp4d-install-cartridges-olm-utils.yml
  vars:
    _p_apply_cartridges_list: "{{ _current_cp4d_cartridge.olm_utils_name }}"
  when: 
  - not _install_cr_script.stat.exists
  - _p_cp4d_version < '5.3.0'

- include_tasks: cp4d-install-cartridges-install-components.yml
  vars:
    _p_apply_cartridges_list: "{{ _current_cp4d_cartridge.olm_utils_name }}"
  when: 
  - not _install_cr_script.stat.exists
  - _p_cp4d_version >= '5.3.0'

# Run specific separate install script if script exists for cartridge
- include_tasks: "cp4d-install-cr-{{ _current_cp4d_cartridge.olm_utils_name }}.yml"
  when: _install_cr_script.stat.exists
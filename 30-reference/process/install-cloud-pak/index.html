<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Automated deployer of OpenShift cluster and IBM Cloud Paks"><meta name=author content=Author><link href=https://ibm.github.io/cloud-pak-deployer/30-reference/process/install-cloud-pak/ rel=canonical><link href=../configure-infra/ rel=prev><link href=../configure-cloud-pak/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Install the Cloud Pak - Cloud Pak Deployer</title><link rel=stylesheet href=../../../assets/stylesheets/main.84d31ad4.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#install-the-cloud-paks class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Cloud Pak Deployer" class="md-header__button md-logo" aria-label="Cloud Pak Deployer" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Deployer </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Install the Cloud Pak </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/IBM/cloud-pak-deployer title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Cloud Pak Deployer </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Cloud Pak Deployer" class="md-nav__button md-logo" aria-label="Cloud Pak Deployer" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Cloud Pak Deployer </label> <div class=md-nav__source> <a href=https://github.com/IBM/cloud-pak-deployer title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Cloud Pak Deployer </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../01-introduction/current-state-and-support/ class=md-nav__link> <span class=md-ellipsis> Current state </span> </a> </li> <li class=md-nav__item> <a href=../../../05-install/install/ class=md-nav__link> <span class=md-ellipsis> Installing Cloud Pak Deployer </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Using Cloud Pak Deployer </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Using Cloud Pak Deployer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/1-overview/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Run </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Run </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/run/ class=md-nav__link> <span class=md-ellipsis> Running Cloud Pak Deployer </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/existing-openshift/ class=md-nav__link> <span class=md-ellipsis> Existing OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/existing-openshift-console/ class=md-nav__link> <span class=md-ellipsis> Existing OpenShift using Console </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/ibm-cloud/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/ibm-fusion/ class=md-nav__link> <span class=md-ellipsis> IBM Fusion </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/aws-rosa/ class=md-nav__link> <span class=md-ellipsis> AWS ROSA </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/aws-self-managed/ class=md-nav__link> <span class=md-ellipsis> AWS Self-managed </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/azure-aro/ class=md-nav__link> <span class=md-ellipsis> Azure ARO </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/azure-self-managed/ class=md-nav__link> <span class=md-ellipsis> Azure Self-managed </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/vsphere/ class=md-nav__link> <span class=md-ellipsis> vSphere </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Post-run </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Post-run </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/5-post-run/post-run/ class=md-nav__link> <span class=md-ellipsis> Post-run changes </span> </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/7-command/command/ class=md-nav__link> <span class=md-ellipsis> Running commands </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Destroy </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Destroy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/9-destroy/destroy/ class=md-nav__link> <span class=md-ellipsis> Destroy cluster </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../configuration/topologies/ class=md-nav__link> <span class=md-ellipsis> Topologies </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cpd-objects/ class=md-nav__link> <span class=md-ellipsis> Objects overview </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cpd-global-config/ class=md-nav__link> <span class=md-ellipsis> Global config </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/vault/ class=md-nav__link> <span class=md-ellipsis> Vault </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/infrastructure/ class=md-nav__link> <span class=md-ellipsis> Infrastructure </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1_6> <label class=md-nav__link for=__nav_5_1_6 id=__nav_5_1_6_label tabindex=0> <span class=md-ellipsis> OpenShift </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1_6> <span class="md-nav__icon md-icon"></span> OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../configuration/openshift/ class=md-nav__link> <span class=md-ellipsis> OpenShift </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1_6_2> <label class=md-nav__link for=__nav_5_1_6_2 id=__nav_5_1_6_2_label tabindex=0> <span class=md-ellipsis> Identity and Access Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_5_1_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1_6_2> <span class="md-nav__icon md-icon"></span> Identity and Access Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../configuration/redhat-sso/ class=md-nav__link> <span class=md-ellipsis> Red Hat SSO </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/ldap/ class=md-nav__link> <span class=md-ellipsis> LDAP </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/demo-openldap/ class=md-nav__link> <span class=md-ellipsis> Demo OpenLDAP </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../configuration/ibm-storage/ class=md-nav__link> <span class=md-ellipsis> IBM Storage </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/logging-auditing/ class=md-nav__link> <span class=md-ellipsis> Logging and auditing </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/dns/ class=md-nav__link> <span class=md-ellipsis> DNS </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../configuration/cloud-pak/ class=md-nav__link> <span class=md-ellipsis> Cloud Paks </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1_8> <label class=md-nav__link for=__nav_5_1_8 id=__nav_5_1_8_label tabindex=0> <span class=md-ellipsis> Cloud Pak for Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_1_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1_8> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../configuration/cp4d-cartridges/ class=md-nav__link> <span class=md-ellipsis> Cartridges </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cp4d-instances/ class=md-nav__link> <span class=md-ellipsis> Instances </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cp4d-connections/ class=md-nav__link> <span class=md-ellipsis> Platform connections </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cp4d-access-control/ class=md-nav__link> <span class=md-ellipsis> Access Control </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/cp4d-assets/ class=md-nav__link> <span class=md-ellipsis> Assets </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/logging-auditing/ class=md-nav__link> <span class=md-ellipsis> Logging and auditing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../configuration/cp4ba/ class=md-nav__link> <span class=md-ellipsis> Cloud Pak for Business Automation </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/private-registry/ class=md-nav__link> <span class=md-ellipsis> Private registries </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2 checked> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Process </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=true> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Process </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../validate/ class=md-nav__link> <span class=md-ellipsis> Validate </span> </a> </li> <li class=md-nav__item> <a href=../prepare/ class=md-nav__link> <span class=md-ellipsis> Prepare </span> </a> </li> <li class=md-nav__item> <a href=../provision-infra/ class=md-nav__link> <span class=md-ellipsis> Provision infra </span> </a> </li> <li class=md-nav__item> <a href=../configure-infra/ class=md-nav__link> <span class=md-ellipsis> Configure infra </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Install Cloud Paks </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Install Cloud Paks </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#remove-cloud-pak-for-data class=md-nav__link> <span class=md-ellipsis> Remove Cloud Pak for Data </span> </a> </li> <li class=md-nav__item> <a href=#prepare-private-image-registry class=md-nav__link> <span class=md-ellipsis> Prepare private image registry </span> </a> <nav class=md-nav aria-label="Prepare private image registry"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ibm-container-registry-namespace-ibm-cloud-only class=md-nav__link> <span class=md-ellipsis> Create IBM Container Registry namespace (IBM Cloud only) </span> </a> </li> <li class=md-nav__item> <a href=#connect-to-the-specified-private-image-registry class=md-nav__link> <span class=md-ellipsis> Connect to the specified private image registry </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-cloud-pak-for-data-and-cartridges class=md-nav__link> <span class=md-ellipsis> Install Cloud Pak for Data and cartridges </span> </a> <nav class=md-nav aria-label="Install Cloud Pak for Data and cartridges"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-openshift-cluster-for-cloud-pak-installation class=md-nav__link> <span class=md-ellipsis> Prepare OpenShift cluster for Cloud Pak installation </span> </a> <nav class=md-nav aria-label="Prepare OpenShift cluster for Cloud Pak installation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-openshift-cluster-on-ibm-cloud-and-ibm-cloud-satellite class=md-nav__link> <span class=md-ellipsis> Prepare OpenShift cluster on IBM Cloud and IBM Cloud Satellite </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mirror-images-to-the-private-registry class=md-nav__link> <span class=md-ellipsis> Mirror images to the private registry </span> </a> </li> <li class=md-nav__item> <a href=#create-catalog-sources class=md-nav__link> <span class=md-ellipsis> Create catalog sources </span> </a> </li> <li class=md-nav__item> <a href=#get-openshift-storage-classes class=md-nav__link> <span class=md-ellipsis> Get OpenShift storage classes </span> </a> </li> <li class=md-nav__item> <a href=#prepare-the-cloud-pak-for-data-operator class=md-nav__link> <span class=md-ellipsis> Prepare the Cloud Pak for Data operator </span> </a> </li> <li class=md-nav__item> <a href=#install-the-cloud-pak-for-data-control-plane class=md-nav__link> <span class=md-ellipsis> Install the Cloud Pak for Data control plane </span> </a> </li> <li class=md-nav__item> <a href=#install-the-specified-cloud-pak-for-data-cartridges class=md-nav__link> <span class=md-ellipsis> Install the specified Cloud Pak for Data cartridges </span> </a> <nav class=md-nav aria-label="Install the specified Cloud Pak for Data cartridges"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-cartridge-operator-subscriptions class=md-nav__link> <span class=md-ellipsis> Create cartridge operator subscriptions </span> </a> </li> <li class=md-nav__item> <a href=#delete-obsolete-cartridges class=md-nav__link> <span class=md-ellipsis> Delete obsolete cartridges </span> </a> </li> <li class=md-nav__item> <a href=#install-the-cartridges class=md-nav__link> <span class=md-ellipsis> Install the cartridges </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wait-until-all-cartridges-are-ready class=md-nav__link> <span class=md-ellipsis> Wait until all cartridges are ready </span> </a> </li> <li class=md-nav__item> <a href=#configure-ldap-authentication-for-cloud-pak-for-data class=md-nav__link> <span class=md-ellipsis> Configure LDAP authentication for Cloud Pak for Data </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../configure-cloud-pak/ class=md-nav__link> <span class=md-ellipsis> Configure Cloud Paks </span> </a> </li> <li class=md-nav__item> <a href=../deploy-assets/ class=md-nav__link> <span class=md-ellipsis> Deploy assets </span> </a> </li> <li class=md-nav__item> <a href=../smoke-tests/ class=md-nav__link> <span class=md-ellipsis> Smoke tests </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../timings/ class=md-nav__link> <span class=md-ellipsis> Timings </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../40-troubleshooting/cp4d-uninstall/ class=md-nav__link> <span class=md-ellipsis> Cloud Pak for Data uninstall </span> </a> </li> <li class=md-nav__item> <a href=../../../40-troubleshooting/ibm-cloud-access-nfs-server/ class=md-nav__link> <span class=md-ellipsis> Access NFS server on IBM Cloud </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> Run on OpenShift </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Run on OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/run-deployer-on-openshift-using-console/ class=md-nav__link> <span class=md-ellipsis> Running deployer on OpenShift using console </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/build-image-and-run-deployer-on-openshift/ class=md-nav__link> <span class=md-ellipsis> Build image and run deployer on OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/run-deployer-wizard-on-openshift/ class=md-nav__link> <span class=md-ellipsis> Run deployer wizard on OpenShift </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../50-advanced/private-registry-and-air-gapped/ class=md-nav__link> <span class=md-ellipsis> Private registry and air-gapped </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/alternative-repo-reg/ class=md-nav__link> <span class=md-ellipsis> Using alternative CASE repositories and registries </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/advanced-configuration/ class=md-nav__link> <span class=md-ellipsis> Advanced configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/locations-to-whitelist/ class=md-nav__link> <span class=md-ellipsis> Locations to whitelist </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/apply-node-settings-non-mco/ class=md-nav__link> <span class=md-ellipsis> Apply node settings to non-MCO clusters </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/cp4d-pre-release/ class=md-nav__link> <span class=md-ellipsis> Installing pre-releases of Cloud Pak for DAta </span> </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/gitops/ class=md-nav__link> <span class=md-ellipsis> GitOps </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../80-development/deployer-development-setup/ class=md-nav__link> <span class=md-ellipsis> Deployer development setup </span> </a> </li> <li class=md-nav__item> <a href=../../../80-development/doc-development-setup/ class=md-nav__link> <span class=md-ellipsis> Deployer documentation development setup </span> </a> </li> <li class=md-nav__item> <a href=../../../80-development/doc-guidelines/ class=md-nav__link> <span class=md-ellipsis> Deployer documentation guidelines </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#remove-cloud-pak-for-data class=md-nav__link> <span class=md-ellipsis> Remove Cloud Pak for Data </span> </a> </li> <li class=md-nav__item> <a href=#prepare-private-image-registry class=md-nav__link> <span class=md-ellipsis> Prepare private image registry </span> </a> <nav class=md-nav aria-label="Prepare private image registry"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ibm-container-registry-namespace-ibm-cloud-only class=md-nav__link> <span class=md-ellipsis> Create IBM Container Registry namespace (IBM Cloud only) </span> </a> </li> <li class=md-nav__item> <a href=#connect-to-the-specified-private-image-registry class=md-nav__link> <span class=md-ellipsis> Connect to the specified private image registry </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-cloud-pak-for-data-and-cartridges class=md-nav__link> <span class=md-ellipsis> Install Cloud Pak for Data and cartridges </span> </a> <nav class=md-nav aria-label="Install Cloud Pak for Data and cartridges"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-openshift-cluster-for-cloud-pak-installation class=md-nav__link> <span class=md-ellipsis> Prepare OpenShift cluster for Cloud Pak installation </span> </a> <nav class=md-nav aria-label="Prepare OpenShift cluster for Cloud Pak installation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-openshift-cluster-on-ibm-cloud-and-ibm-cloud-satellite class=md-nav__link> <span class=md-ellipsis> Prepare OpenShift cluster on IBM Cloud and IBM Cloud Satellite </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mirror-images-to-the-private-registry class=md-nav__link> <span class=md-ellipsis> Mirror images to the private registry </span> </a> </li> <li class=md-nav__item> <a href=#create-catalog-sources class=md-nav__link> <span class=md-ellipsis> Create catalog sources </span> </a> </li> <li class=md-nav__item> <a href=#get-openshift-storage-classes class=md-nav__link> <span class=md-ellipsis> Get OpenShift storage classes </span> </a> </li> <li class=md-nav__item> <a href=#prepare-the-cloud-pak-for-data-operator class=md-nav__link> <span class=md-ellipsis> Prepare the Cloud Pak for Data operator </span> </a> </li> <li class=md-nav__item> <a href=#install-the-cloud-pak-for-data-control-plane class=md-nav__link> <span class=md-ellipsis> Install the Cloud Pak for Data control plane </span> </a> </li> <li class=md-nav__item> <a href=#install-the-specified-cloud-pak-for-data-cartridges class=md-nav__link> <span class=md-ellipsis> Install the specified Cloud Pak for Data cartridges </span> </a> <nav class=md-nav aria-label="Install the specified Cloud Pak for Data cartridges"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-cartridge-operator-subscriptions class=md-nav__link> <span class=md-ellipsis> Create cartridge operator subscriptions </span> </a> </li> <li class=md-nav__item> <a href=#delete-obsolete-cartridges class=md-nav__link> <span class=md-ellipsis> Delete obsolete cartridges </span> </a> </li> <li class=md-nav__item> <a href=#install-the-cartridges class=md-nav__link> <span class=md-ellipsis> Install the cartridges </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wait-until-all-cartridges-are-ready class=md-nav__link> <span class=md-ellipsis> Wait until all cartridges are ready </span> </a> </li> <li class=md-nav__item> <a href=#configure-ldap-authentication-for-cloud-pak-for-data class=md-nav__link> <span class=md-ellipsis> Configure LDAP authentication for Cloud Pak for Data </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=install-the-cloud-paks>Install the Cloud Pak(s)<a class=headerlink href=#install-the-cloud-paks title="Permanent link">🔗</a></h1> <p>This stage focuses on preparing the OpenShift cluster for installing the Cloud Pak(s) and then proceeds with the installation of Cloud Paks and the cartridges. The below documentation will start with a list of steps that will be executed for all Cloud Paks, then proceed with Cloud Pak specific activities. The execution of the steps may slightly differ from the sequence in the documentation.</p> <p>Sections:</p> <ul> <li><a href=#remove-cloud-pak-for-data>Remove obsolete Cloud Pak for Data instances</a></li> <li><a href=#prepare-private-image-registry>Prepare private image registry</a></li> <li><a href=#install-cloud-pak-for-data-and-cartridges>Install Cloud Pak for Data and cartridges</a></li> </ul> <h2 id=remove-cloud-pak-for-data>Remove Cloud Pak for Data<a class=headerlink href=#remove-cloud-pak-for-data title="Permanent link">🔗</a></h2> <p>Before going ahead with the mirroring of container images and installation of Cloud Pak for Data, the previous configuration (if any) is retrieved from the vault to determine if a Cloud Pak for Data instance has been removed. If a previously installed <code>cp4d</code> object no longer exists in the current configuration, its associated instance is removed from the OpenShift cluster.</p> <p>First, the custom resources are removed from the OpenShift project. This happens with a grace period of 5 minutes. After the grace period has expired, OpenShift automatically forcefully deletes the custom resource and its associated definitions. Then, the control plane custom resource <code>Ibmcpd</code> is removed and finally the namespace (project). For the namespace deletion, a grace period of 10 minutes is applied.</p> <h2 id=prepare-private-image-registry>Prepare private image registry<a class=headerlink href=#prepare-private-image-registry title="Permanent link">🔗</a></h2> <p>When installing the Cloud Paks, images must be pulled from an image registry. All Cloud Paks support pulling images directly from the IBM Entitled Registry using the entitlement key, but there may be situations this is not possible, for example in air-gapped environents, or when images must be scanned for vulnerabilities before they are allowed to be used. In those cases, a private registry will have to be set up.</p> <p>The Cloud Pak Deployer can mirror images to a private registry from the entitled registry. On IBM Cloud, the deployer is also capable of creating a namespace in the IBM Container Registry and mirror the images to that namespace.</p> <p>When a private registry has been specified in the Cloud Pak entry (using the <code>image_registry_name</code> property), the necessary OpenShift configuration changes will also be made.</p> <h3 id=create-ibm-container-registry-namespace-ibm-cloud-only>Create IBM Container Registry namespace (IBM Cloud only)<a class=headerlink href=#create-ibm-container-registry-namespace-ibm-cloud-only title="Permanent link">🔗</a></h3> <p>If OpenShift is deployed on IBM Cloud (ROKS), the IBM Container Registry should be used as the private registry from which the images will be pulled. Images in the ICR are organized by namespace and can be accessed using an API key issued for a service account. If an <code>image_registry</code> object is specified in the configuration, this process will take care of creating the service account, then the API key and it will store the API key in the vault.</p> <h3 id=connect-to-the-specified-private-image-registry>Connect to the specified private image registry<a class=headerlink href=#connect-to-the-specified-private-image-registry title="Permanent link">🔗</a></h3> <p>If an image registry has been specified for the Cloud Pak using the <code>image_registry_name</code> property, the referenced <code>image_registry</code> entry is looked up in the configuration and the credentials are retrieved from the vault. Then the connection to the registry is tested by logging on.</p> <h2 id=install-cloud-pak-for-data-and-cartridges>Install Cloud Pak for Data and cartridges<a class=headerlink href=#install-cloud-pak-for-data-and-cartridges title="Permanent link">🔗</a></h2> <h3 id=prepare-openshift-cluster-for-cloud-pak-installation>Prepare OpenShift cluster for Cloud Pak installation<a class=headerlink href=#prepare-openshift-cluster-for-cloud-pak-installation title="Permanent link">🔗</a></h3> <p>Cloud Pak for Data requires a number of cluster-wide settings:</p> <ul> <li>Create an <code>ImageContentSourcePolicy</code> if images must be pulled from a private registry</li> <li>Set the global pull secret with the credentials to pull images from the entitled or private image registry</li> <li>Create a <code>Tuned</code> object to set kernel semaphores and other properties of CoreOS containers being spun up</li> <li>Allow unsafe system controls in the Kubelet configuration</li> <li>Set PIDs limit and default ulimit for the CRI-O configuration</li> </ul> <p>For all OpenShift clusters, except ROKS on IBM Cloud, these settings are applied using OpenShift configuration objects and then picked up by the Machine Config Operator. This operator will then apply the settings to the control plane and compute nodes as appropriate and reload them one by one.</p> <p>To avoid having to reload the nodes more than once, the Machine Config Operator is paused before the settings are applied. After all setup, the Machine Config Operator is released and the deployment process will then wait until all nodes are ready with the configuration applied.</p> <h4 id=prepare-openshift-cluster-on-ibm-cloud-and-ibm-cloud-satellite>Prepare OpenShift cluster on IBM Cloud and IBM Cloud Satellite<a class=headerlink href=#prepare-openshift-cluster-on-ibm-cloud-and-ibm-cloud-satellite title="Permanent link">🔗</a></h4> <p>As mentioned before, ROKS on IBM Cloud does not include the Machine Config Operator and would normally require the compute nodes to be reloaded (classic ROKS) or replaced (ROKS on VPC) to make the changes effective. While implementing this process, we have experienced intermittent reliability issues where replacement of nodes never finished or the cluster ended up in a unusable state. To avoid this, the process is applying the settings in a different manner.</p> <p>On every node, a cron job is created which starts every 5 minutes. It runs a script that checks if any of the cluster-wide settings must be (re-)applied, then updates the local system and restarts the <code>crio</code> and <code>kubelet</code> daemons. If no settings are to be adjusted, the daemons will not be restarted and therefore the cron job has minimal or no effect on the running applications.</p> <p>Compute node changes that are made by the cron job: <strong>ImageContentSourcePolicy</strong>: File <code>/etc/containers/registries.conf</code> is updated to include registry mirrors for the private registry. <strong>Kubelet</strong>: File <code>/etc/kubernetes/kubelet.conf</code> is appended with the <code>allowedUnsafeSysctls</code> entries. <strong>CRI-O</strong>: <code>pids_limit</code> and <code>default_ulimit</code> changes are made to the <code>/etc/crio/crio.conf</code> file. <strong>Pull secret</strong>: The registry and credentials are appended to the <code>/.docker/config.json</code> configuration.</p> <p>There are scenarios, especially on IBM Cloud Satellite, where custom changes must be applied to the compute nodes. This is possible by adding the <code>apply-custom-node-settings.sh</code> to the <code>assets</code> directory within the <code>CONFIG_DIR</code> directory. Once Kubelet, CRI-O and other changes have been applied, this script (if existing) is run to apply any additional configuration changes to the compute node.</p> <p>By setting the <code>NODE_UPDATED</code> script variable to <code>1</code> you can tell the deployer to restart the <code>crio</code> and <code>kubelet</code> daemons.</p> <p><strong>WARNING:</strong> You should never set the <code>NODE_UPDATED</code> script variable to <code>0</code> as this will cause previous changes to the pull secret, ImageContentSourcePolicy and others not to become effective.</p> <p><strong>WARNING:</strong> Do not end the script with the <code>exit</code> command; this will stop the calling script from running and therefore not restart the daemons.</p> <p>Sample script: <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>

<span class=c1>#</span>
<span class=c1># This is a sample script that will cause the crio and kubelet daemons to be restarted once by checking</span>
<span class=c1># file /tmp/apply-custom-node-settings-run. If the file doesn&#39;t exist, it creates it and sets NODE_UPDATED to 1.</span>
<span class=c1># The deployer will observe that the node has been updated and restart the daemons.</span>
<span class=c1>#</span>

<span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>!<span class=w> </span>-e<span class=w> </span>/tmp/apply-custom-node-settings-run<span class=w> </span><span class=o>]</span><span class=p>;</span><span class=k>then</span>
<span class=w>    </span>touch<span class=w> </span>/tmp/apply-custom-node-settings-run
<span class=w>    </span><span class=nv>NODE_UPDATED</span><span class=o>=</span><span class=m>1</span>
<span class=k>fi</span>
</code></pre></div></p> <h3 id=mirror-images-to-the-private-registry>Mirror images to the private registry<a class=headerlink href=#mirror-images-to-the-private-registry title="Permanent link">🔗</a></h3> <p>If a private image registry is specified, and if the IBM Cloud Pak entitlement key is available in the vault (<code>cp_entitlement_key</code> secret), the Cloud Pak case files for the Foundational Services, the Cloud Pak control plane and cartridges are downloaded to a subdirectory of the status directory that was specified. Then all images defined for the cartridges are mirrored from the entitled registry to the private image registry. Dependent on network speed and how many cartridges have been configured, the mirroring can take a very long time (12+ hours). All images which have already been mirrored to the private registry are skipped by the mirroring process.</p> <p>Even if all images have been mirrored, the act of checking existence and digest can still take a bit of time (10-15 minutes). To avoid this, you can remove the <code>cp_entitlement_key</code> secret from the vault and unset the <code>CP_ENTITLEMENT_KEY</code> environment variable before running the Cloud Pak Deployer.</p> <h3 id=create-catalog-sources>Create catalog sources<a class=headerlink href=#create-catalog-sources title="Permanent link">🔗</a></h3> <p>The images of the operators which control the Cloud Pak are defined in OpenShift <code>CatalogSource</code> objects which reside in the <code>openshift-marketplace</code> project. Operator subscriptions subsequently reference the catalog source and define the update channel. When images are pulled from the entitled registry, most subscriptions reference the same <code>ibm-operator-catalog</code> catalog source (and also a Db2U catalog source). If images are pulled from a private registry, the control plane and also each cartridge reference their own catalog source in the <code>openshift-marketplace</code> project.</p> <p>This step creates the necessary catalog sources, dependent on whether the entitled registry or a private registry is used. For the entitled registry, it creates the catalog source directly using a YAML template; when using a private registry, the <code>cloudctl case</code> command is used for the control plane and every cartridge to install the catalog sources and their dependencies.</p> <h3 id=get-openshift-storage-classes>Get OpenShift storage classes<a class=headerlink href=#get-openshift-storage-classes title="Permanent link">🔗</a></h3> <p>Most custom resources defined by the cartridge operators require some back-end storage. To be able to reference the correct OpenShift storage classes, they are retrieved based on the <code>openshift_storage_name</code> property of the Cloud Pak object.</p> <h3 id=prepare-the-cloud-pak-for-data-operator>Prepare the Cloud Pak for Data operator<a class=headerlink href=#prepare-the-cloud-pak-for-data-operator title="Permanent link">🔗</a></h3> <p>When using express install, the Cloud Pak for Data operator also installs the Cloud Pak Foundational Services. Consecutively, this part of the deployer:</p> <ul> <li>Creates the operator project if it doesn't exist already</li> <li>Creates an OperatorGroup</li> <li>Installs the license service and certificate manager</li> <li>Creates the platform operator subscription</li> <li>Waits until the ClusterServerVersion objects for the platform operator and Operand Deployment Lifecycle Manager have been created</li> </ul> <h3 id=install-the-cloud-pak-for-data-control-plane>Install the Cloud Pak for Data control plane<a class=headerlink href=#install-the-cloud-pak-for-data-control-plane title="Permanent link">🔗</a></h3> <p>When the Cloud Pak for Data operator has been installed, the process continues by creating an OperandRequest object for the platform operator which manages the project in the which Cloud Pak for Data instance is installed. Then it creates an Ibmcpd custom resource in the project which installs the controle plane with nginx the metastore, etc.</p> <p>The Cloud Pak for Data control plane is a pre-requisite for all cartridges so at this stage, the deployer waits until the Ibmcpd status reached the <code>Completed</code> state.</p> <p>Once the control plane has been installed successfully, the deployer generates a new strong 25-character password for the Cloud Pak for Data <code>admin</code> user and stores this into the vault. Additionally, the <code>admin-user-details</code> secret in the OpenShift project is updated with the new password.</p> <h3 id=install-the-specified-cloud-pak-for-data-cartridges>Install the specified Cloud Pak for Data cartridges<a class=headerlink href=#install-the-specified-cloud-pak-for-data-cartridges title="Permanent link">🔗</a></h3> <p>Now that the control plane has been installed in the specified OpenShift project, cartridges can be installed. Every cartridge is controlled by its own operator subscription in the operators project and a custom resource. The deployer iterates twice over the specified cartridges, first to create the operator subscriptions, then to create the custom resources.</p> <h4 id=create-cartridge-operator-subscriptions>Create cartridge operator subscriptions<a class=headerlink href=#create-cartridge-operator-subscriptions title="Permanent link">🔗</a></h4> <p>This steps creates <code>subscription</code> objects for each cartridge in the operators project, using a YAML template that is included in the deployer code and the <code>subscription_channel</code> specified in the cartridge definition. Keeping the subscription channel separate delivers flexibility when new subscription channels become available over time.</p> <p>Once the subscription has been created, the deployer waits for the associate CSV(s) to be created and reach the <code>Installed</code> state.</p> <h4 id=delete-obsolete-cartridges>Delete obsolete cartridges<a class=headerlink href=#delete-obsolete-cartridges title="Permanent link">🔗</a></h4> <p>If this is not the first installation, earlier configured cartridges may have been removed. This steps iterates over all supported cartridges and checks if the cartridge has been installed and wheter it exists in the configuration of the current <code>cp4d</code> object. If the cartridge is no longer defined, its custom resource is removed; the operator will then take care of removing all OpenShift configuration.</p> <h4 id=install-the-cartridges>Install the cartridges<a class=headerlink href=#install-the-cartridges title="Permanent link">🔗</a></h4> <p>This steps creates the Custom Resources for each cartridge. This is the actual installation of the cartridge. Cartridges can be installed in parallel to a certain extent and the operator will wait for the dependencies to be installed first before starting the processes. For example, if Watson Studio and Watson Machine Learning are installed, both have a dependency on the Common Core Services (CCS) and will wait for the CCS object to reach the Completed state before proceeding with the install. Once that is the case, both WS and WML will run the installation process in parallel.</p> <h3 id=wait-until-all-cartridges-are-ready>Wait until all cartridges are ready<a class=headerlink href=#wait-until-all-cartridges-are-ready title="Permanent link">🔗</a></h3> <p>Installation of the cartridges can take a very long time; up to 5 hours for Watson Knowledge Catalog. While cartridges are being installed, the deployer checks the states of all cartridges on a regular basis and reports these in a log file. The deployer will retry until all specified cartridges have reached the <code>Completed</code> state.</p> <h3 id=configure-ldap-authentication-for-cloud-pak-for-data>Configure LDAP authentication for Cloud Pak for Data<a class=headerlink href=#configure-ldap-authentication-for-cloud-pak-for-data title="Permanent link">🔗</a></h3> <p>If LDAP has been configured for the Cloud Pak for Data element, it will be configured after all cartridges have finished installing.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../../js/open_in_new_tab.js></script> </body> </html>
---
global_config:
  environment_name: sample
  cloud_platform: ibm-cloud
  ibm_cloud_region: eu-de
  env_id: pluto-01
  confirm_destroy: False

provider:
- name: ibm
  region: "{{ ibm_cloud_region }}"

resource_group:
- name: "Default" # should exist already

ssh_keys:
- name: "{{ env_id }}-provision"
  managed: True 

security_rule:
- name: https
  tcp: {port_min: 443, port_max: 443}
- name: ssh
  tcp: {port_min: 22, port_max: 22}

vpc:
- name: "{{ env_id }}"
  allow_inbound: ['ssh']

address_prefix:
- name: "{{ env_id }}-zone"
  zone: "{{ ibm_cloud_region }}-1"
  cidr: 10.231.0.0/24

subnet:
- name: "{{ env_id }}-subnet"
  address_prefix: "{{ env_id }}-zone"
  ipv4_cidr_block: 10.231.0.0/24

cos:
- name: "{{ env_id }}-cos"
  plan: standard
  location: global

openshift:
- name: "{{ env_id }}"
  ocp_version: 4.12
  compute_flavour: bx2.16x64
  compute_nodes: 5
  infrastructure:
    type: vpc
    vpc_name: "{{ env_id }}"
    subnets: 
    - "{{ env_id }}-subnet"
    cos_name: "{{ env_id }}-cos"
  openshift_storage:
  - storage_name: ibm-vpc-storage
    storage_type: ibm-vpc-storage